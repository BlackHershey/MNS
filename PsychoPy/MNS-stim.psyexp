<?xml version="1.0" ?>
<PsychoPy2experiment encoding="utf-8" version="2021.1.2">
  <Settings>
    <Param name="Audio latency priority" updates="None" val="3" valType="str"/>
    <Param name="Audio lib" updates="None" val="sounddevice" valType="str"/>
    <Param name="Completed URL" updates="None" val="" valType="str"/>
    <Param name="Data file delimiter" updates="None" val="auto" valType="str"/>
    <Param name="Data filename" updates="None" val="u'data/{}_sub-{}_ses-{}_{}'.format(expName, expInfo['participant'], expInfo['session'].zfill(3), data.getDateStr(format=&quot;%Y-%m-%d-%H%M%S&quot;))" valType="code"/>
    <Param name="Enable Escape" updates="None" val="True" valType="bool"/>
    <Param name="Experiment info" updates="None" val="{'participant': '', 'session': ''}" valType="code"/>
    <Param name="Force stereo" updates="None" val="True" valType="bool"/>
    <Param name="Full-screen window" updates="None" val="True" valType="bool"/>
    <Param name="HTML path" updates="None" val="" valType="str"/>
    <Param name="Incomplete URL" updates="None" val="" valType="str"/>
    <Param name="Monitor" updates="None" val="testMonitor" valType="str"/>
    <Param name="Resources" updates="None" val="[]" valType="list"/>
    <Param name="Save csv file" updates="None" val="False" valType="bool"/>
    <Param name="Save excel file" updates="None" val="True" valType="bool"/>
    <Param name="Save log file" updates="None" val="True" valType="bool"/>
    <Param name="Save psydat file" updates="None" val="True" valType="bool"/>
    <Param name="Save wide csv file" updates="None" val="False" valType="bool"/>
    <Param name="Screen" updates="None" val="1" valType="num"/>
    <Param name="Show info dlg" updates="None" val="True" valType="bool"/>
    <Param name="Show mouse" updates="None" val="False" valType="bool"/>
    <Param name="Units" updates="None" val="height" valType="str"/>
    <Param name="Use version" updates="None" val="" valType="str"/>
    <Param name="Window size (pixels)" updates="None" val="[1920, 1080]" valType="list"/>
    <Param name="blendMode" updates="None" val="avg" valType="str"/>
    <Param name="color" updates="None" val="$[0,0,0]" valType="color"/>
    <Param name="colorSpace" updates="None" val="rgb" valType="str"/>
    <Param name="expName" updates="None" val="MNS-stim" valType="str"/>
    <Param name="exportHTML" updates="None" val="on Sync" valType="str"/>
    <Param name="logging level" updates="None" val="data" valType="code"/>
  </Settings>
  <Routines>
    <Routine name="test_pulse">
      <TextComponent name="TestPulseText">
        <Param name="color" updates="constant" val="white" valType="color"/>
        <Param name="colorSpace" updates="constant" val="rgb" valType="str"/>
        <Param name="contrast" updates="constant" val="1" valType="num"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="durationEstim" updates="None" val="" valType="num"/>
        <Param name="flip" updates="constant" val="None" valType="str"/>
        <Param name="font" updates="constant" val="Open Sans" valType="str"/>
        <Param name="languageStyle" updates="None" val="LTR" valType="str"/>
        <Param name="letterHeight" updates="constant" val="0.075" valType="num"/>
        <Param name="name" updates="None" val="TestPulseText" valType="code"/>
        <Param name="opacity" updates="constant" val="" valType="num"/>
        <Param name="ori" updates="constant" val="0" valType="num"/>
        <Param name="pos" updates="constant" val="(0, 0)" valType="list"/>
        <Param name="saveStartStop" updates="None" val="True" valType="bool"/>
        <Param name="startEstim" updates="None" val="" valType="num"/>
        <Param name="startType" updates="None" val="time (s)" valType="str"/>
        <Param name="startVal" updates="None" val="0.0" valType="num"/>
        <Param name="stopType" updates="None" val="duration (s)" valType="str"/>
        <Param name="stopVal" updates="constant" val="" valType="num"/>
        <Param name="syncScreenRefresh" updates="None" val="True" valType="bool"/>
        <Param name="text" updates="constant" val="8: send eight test pulses&amp;#10;1: send one test pulse&amp;#10;&amp;#10;p: begin protocol&amp;#10;5: skip to first 5-minute &quot;ON&quot; run&amp;#10;E: exit" valType="str"/>
        <Param name="units" updates="None" val="from exp settings" valType="str"/>
        <Param name="wrapWidth" updates="constant" val="" valType="num"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_test">
        <Param name="allowedKeys" updates="constant" val="'e','8','1','5','p'" valType="list"/>
        <Param name="correctAns" updates="constant" val="" valType="str"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="discard previous" updates="constant" val="True" valType="bool"/>
        <Param name="durationEstim" updates="None" val="" valType="num"/>
        <Param name="forceEndRoutine" updates="constant" val="False" valType="bool"/>
        <Param name="name" updates="None" val="key_resp_test" valType="code"/>
        <Param name="saveStartStop" updates="None" val="True" valType="bool"/>
        <Param name="startEstim" updates="None" val="" valType="num"/>
        <Param name="startType" updates="None" val="time (s)" valType="str"/>
        <Param name="startVal" updates="None" val="0.0" valType="num"/>
        <Param name="stopType" updates="None" val="duration (s)" valType="str"/>
        <Param name="stopVal" updates="constant" val="" valType="num"/>
        <Param name="store" updates="constant" val="nothing" valType="str"/>
        <Param name="storeCorrect" updates="constant" val="False" valType="bool"/>
        <Param name="syncScreenRefresh" updates="constant" val="True" valType="bool"/>
      </KeyboardComponent>
      <CodeComponent name="testPulseCode">
        <Param name="Before Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Before JS Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Begin Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Begin JS Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Begin JS Routine" updates="constant" val="console.log(&quot;TEST PULSE ROUTINE&quot;);&amp;#10;testPulsesLastRT = 0.0;&amp;#10;" valType="extendedCode"/>
        <Param name="Begin Routine" updates="constant" val="print('TEST PULSE ROUTINE')&amp;#10;testPulsesLastRT = 0.0" valType="extendedCode"/>
        <Param name="Code Type" updates="None" val="Auto-&gt;JS" valType="str"/>
        <Param name="Each Frame" updates="constant" val="for key in key_resp_test.keys:&amp;#10;    if 't' in key:&amp;#10;        doTestPulse=int(1)&amp;#10;    elif 'p' in key:&amp;#10;        doOneMinRunReady=int(1)&amp;#10;        continueRoutine = False&amp;#10;    elif '5' in key:&amp;#10;        doOnOffFiveMinRuns=int(1)&amp;#10;        blockCounter = 5&amp;#10;        continueRoutine = False&amp;#10;    elif 'e' in key:&amp;#10;        doExit=int(1)&amp;#10;        continueRoutine = False&amp;#10;    elif '8' in key:&amp;#10;        if key_resp_test.rt &gt; testPulsesLastRT:&amp;#10;            # T_before_pulses = test_pulseClock.getTime()&amp;#10;            sendPulses(serial_port,'R',numTestPulses8,pulseWidthMicroseconds,testPulseFrequencyHz)&amp;#10;            # T_after_pulses = test_pulseClock.getTime()&amp;#10;            testPulsesLastRT = key_resp_test.rt&amp;#10;            # print('test pulse total length = {}'.format(T_after_pulses-T_before_pulses))&amp;#10;    &amp;#10;    elif '1' in key:&amp;#10;        if key_resp_test.rt &gt; testPulsesLastRT:&amp;#10;            # T_before_pulses = test_pulseClock.getTime()&amp;#10;            sendPulses(serial_port,'R',numTestPulses1,pulseWidthMicroseconds,testPulseFrequencyHz)&amp;#10;            # T_after_pulses = test_pulseClock.getTime()&amp;#10;            testPulsesLastRT = key_resp_test.rt&amp;#10;            # print('test pulse total length = {}'.format(T_after_pulses-T_before_pulses))    " valType="extendedCode"/>
        <Param name="Each JS Frame" updates="constant" val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;for (var key, _pj_c = 0, _pj_a = key_resp_test.keys, _pj_b = _pj_a.length; (_pj_c &lt; _pj_b); _pj_c += 1) {&amp;#10;    key = _pj_a[_pj_c];&amp;#10;    if (_pj.in_es6(&quot;t&quot;, key)) {&amp;#10;        doTestPulse = Number.parseInt(1);&amp;#10;    } else {&amp;#10;        if (_pj.in_es6(&quot;p&quot;, key)) {&amp;#10;            doOneMinRunReady = Number.parseInt(1);&amp;#10;            continueRoutine = false;&amp;#10;        } else {&amp;#10;            if (_pj.in_es6(&quot;5&quot;, key)) {&amp;#10;                doOnOffFiveMinRuns = Number.parseInt(1);&amp;#10;                blockCounter = 5;&amp;#10;                continueRoutine = false;&amp;#10;            } else {&amp;#10;                if (_pj.in_es6(&quot;e&quot;, key)) {&amp;#10;                    doExit = Number.parseInt(1);&amp;#10;                    continueRoutine = false;&amp;#10;                } else {&amp;#10;                    if (_pj.in_es6(&quot;8&quot;, key)) {&amp;#10;                        if ((key_resp_test.rt &gt; testPulsesLastRT)) {&amp;#10;                            sendPulses(serial_port, &quot;R&quot;, numTestPulses8, pulseWidthMicroseconds, testPulseFrequencyHz);&amp;#10;                            testPulsesLastRT = key_resp_test.rt;&amp;#10;                        }&amp;#10;                    } else {&amp;#10;                        if (_pj.in_es6(&quot;1&quot;, key)) {&amp;#10;                            if ((key_resp_test.rt &gt; testPulsesLastRT)) {&amp;#10;                                sendPulses(serial_port, &quot;R&quot;, numTestPulses1, pulseWidthMicroseconds, testPulseFrequencyHz);&amp;#10;                                testPulsesLastRT = key_resp_test.rt;&amp;#10;                            }&amp;#10;                        }&amp;#10;                    }&amp;#10;                }&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;}&amp;#10;" valType="extendedCode"/>
        <Param name="End Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="End JS Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="End JS Routine" updates="constant" val="stopPulses(serial_port);&amp;#10;" valType="extendedCode"/>
        <Param name="End Routine" updates="constant" val="stopPulses(serial_port)" valType="extendedCode"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="name" updates="None" val="testPulseCode" valType="code"/>
      </CodeComponent>
    </Routine>
    <Routine name="exit">
      <TextComponent name="textExit">
        <Param name="color" updates="constant" val="white" valType="color"/>
        <Param name="colorSpace" updates="constant" val="rgb" valType="str"/>
        <Param name="contrast" updates="constant" val="1" valType="num"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="durationEstim" updates="None" val="" valType="num"/>
        <Param name="flip" updates="constant" val="None" valType="str"/>
        <Param name="font" updates="constant" val="Open Sans" valType="str"/>
        <Param name="languageStyle" updates="None" val="LTR" valType="str"/>
        <Param name="letterHeight" updates="constant" val="0.1" valType="num"/>
        <Param name="name" updates="None" val="textExit" valType="code"/>
        <Param name="opacity" updates="constant" val="" valType="num"/>
        <Param name="ori" updates="constant" val="0" valType="num"/>
        <Param name="pos" updates="constant" val="(0, 0)" valType="list"/>
        <Param name="saveStartStop" updates="None" val="True" valType="bool"/>
        <Param name="startEstim" updates="None" val="" valType="num"/>
        <Param name="startType" updates="None" val="time (s)" valType="str"/>
        <Param name="startVal" updates="None" val="0.0" valType="num"/>
        <Param name="stopType" updates="None" val="duration (s)" valType="str"/>
        <Param name="stopVal" updates="constant" val="2.0" valType="num"/>
        <Param name="syncScreenRefresh" updates="None" val="True" valType="bool"/>
        <Param name="text" updates="constant" val="BYE!" valType="str"/>
        <Param name="units" updates="None" val="from exp settings" valType="str"/>
        <Param name="wrapWidth" updates="constant" val="" valType="num"/>
      </TextComponent>
      <CodeComponent name="code_exit">
        <Param name="Before Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Before JS Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Begin Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Begin JS Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Begin JS Routine" updates="constant" val="stopPulses(serial_port);&amp;#10;" valType="extendedCode"/>
        <Param name="Begin Routine" updates="constant" val="stopPulses(serial_port)" valType="extendedCode"/>
        <Param name="Code Type" updates="None" val="Auto-&gt;JS" valType="str"/>
        <Param name="Each Frame" updates="constant" val="" valType="extendedCode"/>
        <Param name="Each JS Frame" updates="constant" val="" valType="extendedCode"/>
        <Param name="End Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="End JS Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="End JS Routine" updates="constant" val="serial_port.close();&amp;#10;core.quit();&amp;#10;" valType="extendedCode"/>
        <Param name="End Routine" updates="constant" val="serial_port.close()&amp;#10;core.quit()" valType="extendedCode"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="name" updates="None" val="code_exit" valType="code"/>
      </CodeComponent>
    </Routine>
    <Routine name="one_min_run">
      <CodeComponent name="codeOneMinRun">
        <Param name="Before Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Before JS Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Begin Experiment" updates="constant" val="strCountdown='{}- 1:00'.format(blockCounter)" valType="extendedCode"/>
        <Param name="Begin JS Experiment" updates="constant" val="/* Syntax Error: Fix Python code */" valType="extendedCode"/>
        <Param name="Begin JS Routine" updates="constant" val="/* Syntax Error: Fix Python code */" valType="extendedCode"/>
        <Param name="Begin Routine" updates="constant" val="blockCounter = blockCounter + 1&amp;#10;&amp;#10;if doExit &gt; 0:&amp;#10;    continueRoutine = False&amp;#10;else:&amp;#10;    if stimOn:&amp;#10;        logging.data(&quot;1-MIN {} STIM ON&quot;.format(stim_type))&amp;#10;        sendPulses(serial_port,stim_type,numOneMinPulses,pulseWidthMicroseconds,oneMinPulseFrequency)&amp;#10;    else:&amp;#10;        logging.data(&quot;1-MIN STIM OFF&quot;)" valType="extendedCode"/>
        <Param name="Code Type" updates="None" val="Auto-&gt;JS" valType="str"/>
        <Param name="Each Frame" updates="constant" val="trialT=one_min_runClock.getTime()&amp;#10;Tminus = 60.0 - trialT&amp;#10;if Tminus &lt; 0.0:&amp;#10;    continueRoutine = False&amp;#10;    if blockCounter == 4:&amp;#10;        doFirstFiveMinRun = int(1)&amp;#10;mins, secs = divmod(Tminus, 60.0)&amp;#10;strCountdown='block {}- {:02d}:{:04.1f}'.format(blockCounter, int(mins), secs)" valType="extendedCode"/>
        <Param name="Each JS Frame" updates="constant" val="/* Syntax Error: Fix Python code */" valType="extendedCode"/>
        <Param name="End Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="End JS Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="End JS Routine" updates="constant" val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;keys = key_resp_one_min.keys;&amp;#10;if (_pj.in_es6(&quot;t&quot;, keys)) {&amp;#10;    doTestPulse = Number.parseInt(1);&amp;#10;} else {&amp;#10;    if (_pj.in_es6(&quot;1&quot;, keys)) {&amp;#10;        doOneMinRun = Number.parseInt(1);&amp;#10;    } else {&amp;#10;        if (_pj.in_es6(&quot;5&quot;, keys)) {&amp;#10;            doFiveMinRun = Number.parseInt(1);&amp;#10;        } else {&amp;#10;            if (_pj.in_es6(&quot;e&quot;, keys)) {&amp;#10;                doExit = Number.parseInt(1);&amp;#10;                stopPulses(serial_port);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;}&amp;#10;if ((doExit &lt; 1)) {&amp;#10;    stopPulses(serial_port);&amp;#10;}&amp;#10;" valType="extendedCode"/>
        <Param name="End Routine" updates="constant" val="keys=key_resp_one_min.keys&amp;#10;if 't' in keys:&amp;#10;    doTestPulse=int(1)&amp;#10;elif '1' in keys:&amp;#10;    doOneMinRun=int(1)&amp;#10;elif '5' in keys:&amp;#10;    doFiveMinRun=int(1)&amp;#10;elif 'e' in keys:&amp;#10;    doExit=int(1)&amp;#10;    stopPulses(serial_port)&amp;#10;if doExit &lt; 1:&amp;#10;    stopPulses(serial_port)&amp;#10;" valType="extendedCode"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="name" updates="None" val="codeOneMinRun" valType="code"/>
      </CodeComponent>
      <TextComponent name="textCountdownOne">
        <Param name="color" updates="constant" val="lawngreen" valType="color"/>
        <Param name="colorSpace" updates="constant" val="rgb" valType="str"/>
        <Param name="contrast" updates="constant" val="1" valType="num"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="durationEstim" updates="None" val="" valType="num"/>
        <Param name="flip" updates="constant" val="None" valType="str"/>
        <Param name="font" updates="constant" val="Open Sans" valType="str"/>
        <Param name="languageStyle" updates="None" val="LTR" valType="str"/>
        <Param name="letterHeight" updates="constant" val="0.1" valType="num"/>
        <Param name="name" updates="None" val="textCountdownOne" valType="code"/>
        <Param name="opacity" updates="constant" val="" valType="num"/>
        <Param name="ori" updates="constant" val="0" valType="num"/>
        <Param name="pos" updates="constant" val="(0, 0.25)" valType="list"/>
        <Param name="saveStartStop" updates="None" val="False" valType="bool"/>
        <Param name="startEstim" updates="None" val="" valType="num"/>
        <Param name="startType" updates="None" val="time (s)" valType="str"/>
        <Param name="startVal" updates="None" val="0.0" valType="num"/>
        <Param name="stopType" updates="None" val="duration (s)" valType="str"/>
        <Param name="stopVal" updates="constant" val="" valType="num"/>
        <Param name="syncScreenRefresh" updates="None" val="True" valType="bool"/>
        <Param name="text" updates="set every frame" val="$strCountdown" valType="str"/>
        <Param name="units" updates="None" val="from exp settings" valType="str"/>
        <Param name="wrapWidth" updates="constant" val="" valType="num"/>
      </TextComponent>
      <TextComponent name="textOneMinRun">
        <Param name="color" updates="constant" val="white" valType="color"/>
        <Param name="colorSpace" updates="constant" val="rgb" valType="str"/>
        <Param name="contrast" updates="constant" val="1" valType="num"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="durationEstim" updates="None" val="" valType="num"/>
        <Param name="flip" updates="constant" val="None" valType="str"/>
        <Param name="font" updates="constant" val="Open Sans" valType="str"/>
        <Param name="languageStyle" updates="None" val="LTR" valType="str"/>
        <Param name="letterHeight" updates="constant" val="0.1" valType="num"/>
        <Param name="name" updates="None" val="textOneMinRun" valType="code"/>
        <Param name="opacity" updates="constant" val="" valType="num"/>
        <Param name="ori" updates="constant" val="0" valType="num"/>
        <Param name="pos" updates="constant" val="(0, 0)" valType="list"/>
        <Param name="saveStartStop" updates="None" val="False" valType="bool"/>
        <Param name="startEstim" updates="None" val="" valType="num"/>
        <Param name="startType" updates="None" val="time (s)" valType="str"/>
        <Param name="startVal" updates="None" val="0.0" valType="num"/>
        <Param name="stopType" updates="None" val="duration (s)" valType="str"/>
        <Param name="stopVal" updates="constant" val="" valType="num"/>
        <Param name="syncScreenRefresh" updates="None" val="True" valType="bool"/>
        <Param name="text" updates="set every frame" val="E: exit early" valType="str"/>
        <Param name="units" updates="None" val="from exp settings" valType="str"/>
        <Param name="wrapWidth" updates="constant" val="" valType="num"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_one_min">
        <Param name="allowedKeys" updates="constant" val="'e'" valType="list"/>
        <Param name="correctAns" updates="constant" val="" valType="str"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="discard previous" updates="constant" val="True" valType="bool"/>
        <Param name="durationEstim" updates="None" val="" valType="num"/>
        <Param name="forceEndRoutine" updates="constant" val="True" valType="bool"/>
        <Param name="name" updates="None" val="key_resp_one_min" valType="code"/>
        <Param name="saveStartStop" updates="None" val="True" valType="bool"/>
        <Param name="startEstim" updates="None" val="" valType="num"/>
        <Param name="startType" updates="None" val="time (s)" valType="str"/>
        <Param name="startVal" updates="None" val="0.0" valType="num"/>
        <Param name="stopType" updates="None" val="duration (s)" valType="str"/>
        <Param name="stopVal" updates="constant" val="" valType="num"/>
        <Param name="store" updates="constant" val="last key" valType="str"/>
        <Param name="storeCorrect" updates="constant" val="False" valType="bool"/>
        <Param name="syncScreenRefresh" updates="constant" val="True" valType="bool"/>
      </KeyboardComponent>
      <SoundComponent name="soundOneMinStart">
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="durationEstim" updates="None" val="" valType="num"/>
        <Param name="hamming" updates="constant" val="True" valType="bool"/>
        <Param name="name" updates="None" val="soundOneMinStart" valType="code"/>
        <Param name="saveStartStop" updates="None" val="True" valType="bool"/>
        <Param name="sound" updates="constant" val="440" valType="str"/>
        <Param name="startEstim" updates="None" val="" valType="num"/>
        <Param name="startType" updates="None" val="time (s)" valType="str"/>
        <Param name="startVal" updates="None" val="0.0" valType="num"/>
        <Param name="stopType" updates="None" val="duration (s)" valType="str"/>
        <Param name="stopVal" updates="constant" val="0.25" valType="num"/>
        <Param name="syncScreenRefresh" updates="constant" val="True" valType="bool"/>
        <Param name="volume" updates="constant" val="1" valType="num"/>
      </SoundComponent>
    </Routine>
    <Routine name="start">
      <CodeComponent name="startCode">
        <Param name="Before Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Before JS Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Begin Experiment" updates="constant" val="# from psychopy import parallel&amp;#10;import time&amp;#10;import serial&amp;#10;from datetime import datetime&amp;#10;logging.data(datetime.now())&amp;#10;blockCounter = int(0)&amp;#10;&amp;#10;# pulse width&amp;#10;pulseWidthMicroseconds = int(200)&amp;#10;# pulseWidthSeconds = pulseWidthMicroseconds / 1e6&amp;#10;&amp;#10;# test pulse settings&amp;#10;testPulseFrequencyHz = 12.0&amp;#10;numTestPulses8 = int(8)&amp;#10;numTestPulses1 = int(1)&amp;#10;&amp;#10;# one-minute block pulse settings&amp;#10;numOneMinPulses = int(600)&amp;#10;oneMinPulseFrequency = 10.0&amp;#10;one_min_condition_file = 'one_min_order_{}.csv'.format(session_settings['one_min_order'])&amp;#10;&amp;#10;# five-minute block pulse settings&amp;#10;numFiveMinPulses = int(3600)&amp;#10;fiveMinPulseFrequency = 12.0&amp;#10;&amp;#10;# open Arduino on COM port&amp;#10;serial_port = serial.Serial()&amp;#10;serial_port.baudrate = 115200&amp;#10;port_num = int(9)&amp;#10;while (not serial_port.is_open and port_num &gt; 0):&amp;#10;    serial_port.port = 'COM{}'.format(port_num)&amp;#10;    try:&amp;#10;        serial_port.open()&amp;#10;    except:&amp;#10;        print('No device found at {}'.format(serial_port.port))&amp;#10;        port_num = port_num - 1&amp;#10;        continue&amp;#10;    print('Device found at {}'.format(serial_port.port))&amp;#10;&amp;#10;# test pulse function&amp;#10;def sendPulses(port, rhythmType, numPulses, pulseWidth, pulseFrequency):&amp;#10;    # build serial write string&amp;#10;    ser_write_string = '{}x{}x{}x{}\n'.format(rhythmType, numPulses,pulseWidth,pulseFrequency)&amp;#10;    port.write(ser_write_string.encode('utf-8'))&amp;#10;    logging.data(ser_write_string.rstrip())&amp;#10;    &amp;#10;# turn off stim pulses&amp;#10;def stopPulses(port):&amp;#10;    # send a &quot;0&quot; to turn off stim pulses&amp;#10;    port.write(b'Rx0x200x10.0\n')&amp;#10;    logging.data(&quot;Rx0x200x10.0&quot;)&amp;#10;&amp;#10;" valType="extendedCode"/>
        <Param name="Begin JS Experiment" updates="constant" val="/* Syntax Error: Fix Python code */" valType="extendedCode"/>
        <Param name="Begin JS Routine" updates="constant" val="doTestPulse = 0;&amp;#10;doOneMinRuns = 0;&amp;#10;doOneMinRunReady = 0;&amp;#10;doFirstFiveMinRun = 0;&amp;#10;doOnOffFiveMinRuns = 0;&amp;#10;doExit = 0;&amp;#10;" valType="extendedCode"/>
        <Param name="Begin Routine" updates="constant" val="doTestPulse=0&amp;#10;doOneMinRuns=0&amp;#10;doOneMinRunReady=0&amp;#10;doFirstFiveMinRun=0&amp;#10;doOnOffFiveMinRuns=0&amp;#10;doExit=0" valType="extendedCode"/>
        <Param name="Code Type" updates="None" val="Auto-&gt;JS" valType="str"/>
        <Param name="Each Frame" updates="constant" val="" valType="extendedCode"/>
        <Param name="Each JS Frame" updates="constant" val="" valType="extendedCode"/>
        <Param name="End Experiment" updates="constant" val="stopPulses(serial_port)&amp;#10;serial_port.close()" valType="extendedCode"/>
        <Param name="End JS Experiment" updates="constant" val="stopPulses(serial_port);&amp;#10;serial_port.close();&amp;#10;" valType="extendedCode"/>
        <Param name="End JS Routine" updates="constant" val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;keys = key_resp_home.keys;&amp;#10;if (_pj.in_es6(&quot;t&quot;, keys)) {&amp;#10;    doTestPulse = Number.parseInt(1);&amp;#10;} else {&amp;#10;    if (_pj.in_es6(&quot;p&quot;, keys)) {&amp;#10;        doOneMinRunReady = Number.parseInt(1);&amp;#10;    } else {&amp;#10;        if (_pj.in_es6(&quot;5&quot;, keys)) {&amp;#10;            doOnOffFiveMinRuns = Number.parseInt(1);&amp;#10;            blockCounter = 5;&amp;#10;        } else {&amp;#10;            if (_pj.in_es6(&quot;e&quot;, keys)) {&amp;#10;                doExit = Number.parseInt(1);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;}&amp;#10;" valType="extendedCode"/>
        <Param name="End Routine" updates="constant" val="keys=key_resp_home.keys&amp;#10;if 't' in keys:&amp;#10;    doTestPulse=int(1)&amp;#10;elif 'p' in keys:&amp;#10;    doOneMinRunReady=int(1)&amp;#10;elif '5' in keys:&amp;#10;    doOnOffFiveMinRuns=int(1)&amp;#10;    blockCounter = 5&amp;#10;elif 'e' in keys:&amp;#10;    doExit=int(1)" valType="extendedCode"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="name" updates="None" val="startCode" valType="code"/>
      </CodeComponent>
      <TextComponent name="textHomeScreen">
        <Param name="color" updates="constant" val="white" valType="color"/>
        <Param name="colorSpace" updates="constant" val="rgb" valType="str"/>
        <Param name="contrast" updates="constant" val="1" valType="num"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="durationEstim" updates="None" val="" valType="num"/>
        <Param name="flip" updates="constant" val="None" valType="str"/>
        <Param name="font" updates="constant" val="Open Sans" valType="str"/>
        <Param name="languageStyle" updates="None" val="LTR" valType="str"/>
        <Param name="letterHeight" updates="constant" val="0.075" valType="num"/>
        <Param name="name" updates="None" val="textHomeScreen" valType="code"/>
        <Param name="opacity" updates="constant" val="" valType="num"/>
        <Param name="ori" updates="constant" val="0" valType="num"/>
        <Param name="pos" updates="constant" val="(0, 0)" valType="list"/>
        <Param name="saveStartStop" updates="None" val="True" valType="bool"/>
        <Param name="startEstim" updates="None" val="" valType="num"/>
        <Param name="startType" updates="None" val="time (s)" valType="str"/>
        <Param name="startVal" updates="None" val="0.0" valType="num"/>
        <Param name="stopType" updates="None" val="duration (s)" valType="str"/>
        <Param name="stopVal" updates="constant" val="" valType="num"/>
        <Param name="syncScreenRefresh" updates="None" val="True" valType="bool"/>
        <Param name="text" updates="constant" val="MNS stiumulation control&amp;#10;&amp;#10;t: test pulses&amp;#10;p: begin protocol&amp;#10;5: skip to 5-minute run&amp;#10;E: exit" valType="str"/>
        <Param name="units" updates="None" val="from exp settings" valType="str"/>
        <Param name="wrapWidth" updates="constant" val="" valType="num"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_home">
        <Param name="allowedKeys" updates="constant" val="'t','p','5','e'" valType="list"/>
        <Param name="correctAns" updates="constant" val="" valType="str"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="discard previous" updates="constant" val="True" valType="bool"/>
        <Param name="durationEstim" updates="None" val="" valType="num"/>
        <Param name="forceEndRoutine" updates="constant" val="True" valType="bool"/>
        <Param name="name" updates="None" val="key_resp_home" valType="code"/>
        <Param name="saveStartStop" updates="None" val="True" valType="bool"/>
        <Param name="startEstim" updates="None" val="" valType="num"/>
        <Param name="startType" updates="None" val="time (s)" valType="str"/>
        <Param name="startVal" updates="None" val="0.0" valType="num"/>
        <Param name="stopType" updates="None" val="duration (s)" valType="str"/>
        <Param name="stopVal" updates="constant" val="" valType="num"/>
        <Param name="store" updates="constant" val="last key" valType="str"/>
        <Param name="storeCorrect" updates="constant" val="False" valType="bool"/>
        <Param name="syncScreenRefresh" updates="constant" val="True" valType="bool"/>
      </KeyboardComponent>
    </Routine>
    <Routine name="one_min_ready">
      <TextComponent name="textOneMinTimer">
        <Param name="color" updates="constant" val="gold" valType="color"/>
        <Param name="colorSpace" updates="constant" val="rgb" valType="str"/>
        <Param name="contrast" updates="constant" val="1" valType="num"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="durationEstim" updates="None" val="" valType="num"/>
        <Param name="flip" updates="constant" val="None" valType="str"/>
        <Param name="font" updates="constant" val="Open Sans" valType="str"/>
        <Param name="languageStyle" updates="None" val="LTR" valType="str"/>
        <Param name="letterHeight" updates="constant" val="0.075" valType="num"/>
        <Param name="name" updates="None" val="textOneMinTimer" valType="code"/>
        <Param name="opacity" updates="constant" val="" valType="num"/>
        <Param name="ori" updates="constant" val="0" valType="num"/>
        <Param name="pos" updates="constant" val="(0, 0.25)" valType="list"/>
        <Param name="saveStartStop" updates="None" val="True" valType="bool"/>
        <Param name="startEstim" updates="None" val="" valType="num"/>
        <Param name="startType" updates="None" val="time (s)" valType="str"/>
        <Param name="startVal" updates="None" val="0.0" valType="num"/>
        <Param name="stopType" updates="None" val="duration (s)" valType="str"/>
        <Param name="stopVal" updates="constant" val="" valType="num"/>
        <Param name="syncScreenRefresh" updates="None" val="True" valType="bool"/>
        <Param name="text" updates="constant" val="1:00.0" valType="str"/>
        <Param name="units" updates="None" val="from exp settings" valType="str"/>
        <Param name="wrapWidth" updates="constant" val="" valType="num"/>
      </TextComponent>
      <TextComponent name="textOneMinReady">
        <Param name="color" updates="constant" val="white" valType="color"/>
        <Param name="colorSpace" updates="constant" val="rgb" valType="str"/>
        <Param name="contrast" updates="constant" val="1" valType="num"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="durationEstim" updates="None" val="" valType="num"/>
        <Param name="flip" updates="constant" val="None" valType="str"/>
        <Param name="font" updates="constant" val="Open Sans" valType="str"/>
        <Param name="languageStyle" updates="None" val="LTR" valType="str"/>
        <Param name="letterHeight" updates="constant" val="0.075" valType="num"/>
        <Param name="name" updates="None" val="textOneMinReady" valType="code"/>
        <Param name="opacity" updates="constant" val="" valType="num"/>
        <Param name="ori" updates="constant" val="0" valType="num"/>
        <Param name="pos" updates="constant" val="(0, -0.1)" valType="list"/>
        <Param name="saveStartStop" updates="None" val="True" valType="bool"/>
        <Param name="startEstim" updates="None" val="" valType="num"/>
        <Param name="startType" updates="None" val="time (s)" valType="str"/>
        <Param name="startVal" updates="None" val="0.0" valType="num"/>
        <Param name="stopType" updates="None" val="duration (s)" valType="str"/>
        <Param name="stopVal" updates="constant" val="" valType="num"/>
        <Param name="syncScreenRefresh" updates="None" val="True" valType="bool"/>
        <Param name="text" updates="constant" val="Ready for one-minute run?&amp;#10;&amp;#10;S: start&amp;#10;E: exit" valType="str"/>
        <Param name="units" updates="None" val="from exp settings" valType="str"/>
        <Param name="wrapWidth" updates="constant" val="" valType="num"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_one_min_ready">
        <Param name="allowedKeys" updates="constant" val="'s','e'" valType="list"/>
        <Param name="correctAns" updates="constant" val="" valType="str"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="discard previous" updates="constant" val="True" valType="bool"/>
        <Param name="durationEstim" updates="None" val="" valType="num"/>
        <Param name="forceEndRoutine" updates="constant" val="True" valType="bool"/>
        <Param name="name" updates="None" val="key_resp_one_min_ready" valType="code"/>
        <Param name="saveStartStop" updates="None" val="True" valType="bool"/>
        <Param name="startEstim" updates="None" val="" valType="num"/>
        <Param name="startType" updates="None" val="time (s)" valType="str"/>
        <Param name="startVal" updates="None" val="0.0" valType="num"/>
        <Param name="stopType" updates="None" val="duration (s)" valType="str"/>
        <Param name="stopVal" updates="constant" val="" valType="num"/>
        <Param name="store" updates="constant" val="last key" valType="str"/>
        <Param name="storeCorrect" updates="constant" val="False" valType="bool"/>
        <Param name="syncScreenRefresh" updates="constant" val="True" valType="bool"/>
      </KeyboardComponent>
      <CodeComponent name="codeOneMinStart">
        <Param name="Before Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Before JS Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Begin Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Begin JS Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Begin JS Routine" updates="constant" val="" valType="extendedCode"/>
        <Param name="Begin Routine" updates="constant" val="" valType="extendedCode"/>
        <Param name="Code Type" updates="None" val="Auto-&gt;JS" valType="str"/>
        <Param name="Each Frame" updates="constant" val="" valType="extendedCode"/>
        <Param name="Each JS Frame" updates="constant" val="" valType="extendedCode"/>
        <Param name="End Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="End JS Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="End JS Routine" updates="constant" val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;keys = key_resp_one_min_ready.keys;&amp;#10;if (_pj.in_es6(&quot;t&quot;, keys)) {&amp;#10;    doTestPulse = Number.parseInt(1);&amp;#10;} else {&amp;#10;    if (_pj.in_es6(&quot;1&quot;, keys)) {&amp;#10;        doOneMinRun = Number.parseInt(1);&amp;#10;    } else {&amp;#10;        if (_pj.in_es6(&quot;5&quot;, keys)) {&amp;#10;            doOnOffFiveMinRuns = Number.parseInt(1);&amp;#10;        } else {&amp;#10;            if (_pj.in_es6(&quot;e&quot;, keys)) {&amp;#10;                doExit = Number.parseInt(1);&amp;#10;            } else {&amp;#10;                if (_pj.in_es6(&quot;s&quot;, keys)) {&amp;#10;                    doOneMinRuns = Number.parseInt(1);&amp;#10;                }&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;}&amp;#10;" valType="extendedCode"/>
        <Param name="End Routine" updates="constant" val="keys=key_resp_one_min_ready.keys&amp;#10;if 't' in keys:&amp;#10;    doTestPulse=int(1)&amp;#10;elif '1' in keys:&amp;#10;    doOneMinRun=int(1)&amp;#10;elif '5' in keys:&amp;#10;    doOnOffFiveMinRuns=int(1)&amp;#10;elif 'e' in keys:&amp;#10;    doExit=int(1)&amp;#10;elif 's' in keys:&amp;#10;    doOneMinRuns=int(1)" valType="extendedCode"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="name" updates="None" val="codeOneMinStart" valType="code"/>
      </CodeComponent>
    </Routine>
    <Routine name="five_min_run">
      <CodeComponent name="codeFiveMinRun">
        <Param name="Before Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Before JS Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Begin Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Begin JS Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Begin JS Routine" updates="constant" val="/* Syntax Error: Fix Python code */" valType="extendedCode"/>
        <Param name="Begin Routine" updates="constant" val="blockCounter = blockCounter + 1&amp;#10;strCountdown='block {}- 5:00'.format(blockCounter)&amp;#10;&amp;#10;if doExit &gt; 0:&amp;#10;    continueRoutine = False&amp;#10;&amp;#10;if stimOn:&amp;#10;    logging.data(&quot;5-MIN {} STIM ON&quot;.format(stim_type))&amp;#10;    sendPulses(serial_port,stim_type,numFiveMinPulses,pulseWidthMicroseconds,fiveMinPulseFrequency)&amp;#10;else:&amp;#10;    logging.data(&quot;5-MIN STIM OFF&quot;)" valType="extendedCode"/>
        <Param name="Code Type" updates="None" val="Auto-&gt;JS" valType="str"/>
        <Param name="Each Frame" updates="constant" val="trialT=five_min_runClock.getTime()&amp;#10;Tminus = 300.0 - trialT&amp;#10;if Tminus &lt; 0.0:&amp;#10;    continueRoutine = False&amp;#10;    if blockCounter == 5:&amp;#10;        doOnOffFiveMinRuns = int(1)&amp;#10;mins, secs = divmod(Tminus, 60.0)&amp;#10;strCountdown='block {}- {:02d}:{:04.1f}'.format(blockCounter, int(mins), secs)" valType="extendedCode"/>
        <Param name="Each JS Frame" updates="constant" val="/* Syntax Error: Fix Python code */" valType="extendedCode"/>
        <Param name="End Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="End JS Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="End JS Routine" updates="constant" val="var _pj;&amp;#10;function _pj_snippets(container) {&amp;#10;    function in_es6(left, right) {&amp;#10;        if (((right instanceof Array) || ((typeof right) === &quot;string&quot;))) {&amp;#10;            return (right.indexOf(left) &gt; (- 1));&amp;#10;        } else {&amp;#10;            if (((right instanceof Map) || (right instanceof Set) || (right instanceof WeakMap) || (right instanceof WeakSet))) {&amp;#10;                return right.has(left);&amp;#10;            } else {&amp;#10;                return (left in right);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;    container[&quot;in_es6&quot;] = in_es6;&amp;#10;    return container;&amp;#10;}&amp;#10;_pj = {};&amp;#10;_pj_snippets(_pj);&amp;#10;keys = key_resp_five_min.keys;&amp;#10;if (_pj.in_es6(&quot;t&quot;, keys)) {&amp;#10;    doTestPulse = Number.parseInt(1);&amp;#10;} else {&amp;#10;    if (_pj.in_es6(&quot;1&quot;, keys)) {&amp;#10;        doOneMinRun = Number.parseInt(1);&amp;#10;    } else {&amp;#10;        if (_pj.in_es6(&quot;5&quot;, keys)) {&amp;#10;            doFiveMinRun = Number.parseInt(1);&amp;#10;        } else {&amp;#10;            if (_pj.in_es6(&quot;e&quot;, keys)) {&amp;#10;                doExit = Number.parseInt(1);&amp;#10;                stopPulses(serial_port);&amp;#10;            }&amp;#10;        }&amp;#10;    }&amp;#10;}&amp;#10;if ((doExit &lt; 1)) {&amp;#10;    stopPulses(serial_port);&amp;#10;}&amp;#10;" valType="extendedCode"/>
        <Param name="End Routine" updates="constant" val="keys=key_resp_five_min.keys&amp;#10;if 't' in keys:&amp;#10;    doTestPulse=int(1)&amp;#10;elif '1' in keys:&amp;#10;    doOneMinRun=int(1)&amp;#10;elif '5' in keys:&amp;#10;    doFiveMinRun=int(1)&amp;#10;elif 'e' in keys:&amp;#10;    doExit=int(1)&amp;#10;    stopPulses(serial_port)&amp;#10;if doExit &lt; 1:&amp;#10;    stopPulses(serial_port)" valType="extendedCode"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="name" updates="None" val="codeFiveMinRun" valType="code"/>
      </CodeComponent>
      <TextComponent name="textCountdownFive">
        <Param name="color" updates="constant" val="lawngreen" valType="color"/>
        <Param name="colorSpace" updates="constant" val="rgb" valType="str"/>
        <Param name="contrast" updates="constant" val="1" valType="num"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="durationEstim" updates="None" val="" valType="num"/>
        <Param name="flip" updates="constant" val="None" valType="str"/>
        <Param name="font" updates="constant" val="Open Sans" valType="str"/>
        <Param name="languageStyle" updates="None" val="LTR" valType="str"/>
        <Param name="letterHeight" updates="constant" val="0.1" valType="num"/>
        <Param name="name" updates="None" val="textCountdownFive" valType="code"/>
        <Param name="opacity" updates="constant" val="" valType="num"/>
        <Param name="ori" updates="constant" val="0" valType="num"/>
        <Param name="pos" updates="constant" val="(0, 0.25)" valType="list"/>
        <Param name="saveStartStop" updates="None" val="False" valType="bool"/>
        <Param name="startEstim" updates="None" val="" valType="num"/>
        <Param name="startType" updates="None" val="time (s)" valType="str"/>
        <Param name="startVal" updates="None" val="0.0" valType="num"/>
        <Param name="stopType" updates="None" val="duration (s)" valType="str"/>
        <Param name="stopVal" updates="constant" val="" valType="num"/>
        <Param name="syncScreenRefresh" updates="None" val="True" valType="bool"/>
        <Param name="text" updates="set every frame" val="$strCountdown" valType="str"/>
        <Param name="units" updates="None" val="from exp settings" valType="str"/>
        <Param name="wrapWidth" updates="constant" val="" valType="num"/>
      </TextComponent>
      <TextComponent name="textFiveMinRun">
        <Param name="color" updates="constant" val="white" valType="color"/>
        <Param name="colorSpace" updates="constant" val="rgb" valType="str"/>
        <Param name="contrast" updates="constant" val="1" valType="num"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="durationEstim" updates="None" val="" valType="num"/>
        <Param name="flip" updates="constant" val="None" valType="str"/>
        <Param name="font" updates="constant" val="Open Sans" valType="str"/>
        <Param name="languageStyle" updates="None" val="LTR" valType="str"/>
        <Param name="letterHeight" updates="constant" val="0.1" valType="num"/>
        <Param name="name" updates="None" val="textFiveMinRun" valType="code"/>
        <Param name="opacity" updates="constant" val="" valType="num"/>
        <Param name="ori" updates="constant" val="0" valType="num"/>
        <Param name="pos" updates="constant" val="(0, 0)" valType="list"/>
        <Param name="saveStartStop" updates="None" val="False" valType="bool"/>
        <Param name="startEstim" updates="None" val="" valType="num"/>
        <Param name="startType" updates="None" val="time (s)" valType="str"/>
        <Param name="startVal" updates="None" val="0.0" valType="num"/>
        <Param name="stopType" updates="None" val="duration (s)" valType="str"/>
        <Param name="stopVal" updates="constant" val="" valType="num"/>
        <Param name="syncScreenRefresh" updates="None" val="True" valType="bool"/>
        <Param name="text" updates="constant" val="E: exit early" valType="str"/>
        <Param name="units" updates="None" val="from exp settings" valType="str"/>
        <Param name="wrapWidth" updates="constant" val="" valType="num"/>
      </TextComponent>
      <KeyboardComponent name="key_resp_five_min">
        <Param name="allowedKeys" updates="constant" val="'e'" valType="list"/>
        <Param name="correctAns" updates="constant" val="" valType="str"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="discard previous" updates="constant" val="True" valType="bool"/>
        <Param name="durationEstim" updates="None" val="" valType="num"/>
        <Param name="forceEndRoutine" updates="constant" val="True" valType="bool"/>
        <Param name="name" updates="None" val="key_resp_five_min" valType="code"/>
        <Param name="saveStartStop" updates="None" val="True" valType="bool"/>
        <Param name="startEstim" updates="None" val="" valType="num"/>
        <Param name="startType" updates="None" val="time (s)" valType="str"/>
        <Param name="startVal" updates="None" val="0.0" valType="num"/>
        <Param name="stopType" updates="None" val="duration (s)" valType="str"/>
        <Param name="stopVal" updates="constant" val="" valType="num"/>
        <Param name="store" updates="constant" val="last key" valType="str"/>
        <Param name="storeCorrect" updates="constant" val="False" valType="bool"/>
        <Param name="syncScreenRefresh" updates="constant" val="True" valType="bool"/>
      </KeyboardComponent>
      <SoundComponent name="soundFiveMinStart">
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="durationEstim" updates="None" val="" valType="num"/>
        <Param name="hamming" updates="constant" val="True" valType="bool"/>
        <Param name="name" updates="None" val="soundFiveMinStart" valType="code"/>
        <Param name="saveStartStop" updates="None" val="True" valType="bool"/>
        <Param name="sound" updates="constant" val="523.25" valType="str"/>
        <Param name="startEstim" updates="None" val="" valType="num"/>
        <Param name="startType" updates="None" val="time (s)" valType="str"/>
        <Param name="startVal" updates="None" val="0.0" valType="num"/>
        <Param name="stopType" updates="None" val="duration (s)" valType="str"/>
        <Param name="stopVal" updates="constant" val="0.25" valType="num"/>
        <Param name="syncScreenRefresh" updates="constant" val="True" valType="bool"/>
        <Param name="volume" updates="constant" val="1" valType="num"/>
      </SoundComponent>
    </Routine>
    <Routine name="error_handling">
      <CodeComponent name="codeErrorHandling">
        <Param name="Before Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Before JS Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="Begin Experiment" updates="constant" val="from psychopy import data&amp;#10;&amp;#10;stringErrorHandling = ''&amp;#10;errorState = False&amp;#10;&amp;#10;# session settings&amp;#10;def getSessionSettings(sub_integer):&amp;#10;    # default empty return vals&amp;#10;    rhythm_group = ''&amp;#10;    one_min_order = ''&amp;#10;    # open subject info file&amp;#10;    settings_file = u'MNS-stim_session_settings.csv'&amp;#10;    print('Reading session settings from {}...'.format(settings_file))&amp;#10;    all_settings = data.importConditions(settings_file)&amp;#10;    for row in all_settings:&amp;#10;        if sub_integer == row['participant']:&amp;#10;            rhythm_group = row['rhythm_group']&amp;#10;            one_min_order = row['one_min_order']&amp;#10;            &amp;#10;    if rhythm_group.isalpha() and int(one_min_order):&amp;#10;        # return session settings&amp;#10;        settings = {'rhythm_group': rhythm_group, 'one_min_order': int(one_min_order)}&amp;#10;        print('settings = {}'.format(settings))&amp;#10;        return settings&amp;#10;    else:&amp;#10;        raise Exception&amp;#10;&amp;#10;# check subject number and session number&amp;#10;try:&amp;#10;    sub_int = int(expInfo['participant'])&amp;#10;except:&amp;#10;    stringErrorHandling = &quot;ERROR: participant must be an integer greater than 100&quot;&amp;#10;    errorState = True&amp;#10;try:&amp;#10;    ses_int = int(expInfo['session'])&amp;#10;except:&amp;#10;    stringErrorHandling = &quot;ERROR: session must be an integer greater than 0&quot;&amp;#10;    errorState = True&amp;#10;    &amp;#10;if sub_int &lt; 101:&amp;#10;    stringErrorHandling = &quot;ERROR: participant must be an integer greater than 100&quot;&amp;#10;    errorState = True&amp;#10;    &amp;#10;if ses_int &lt; 1 or ses_int &gt; 2:&amp;#10;    stringErrorHandling = &quot;ERROR: session must be an integer, either 1 or 2&quot;&amp;#10;    errorState = True&amp;#10;    &amp;#10;try:&amp;#10;    session_settings = getSessionSettings(sub_int)&amp;#10;except:&amp;#10;    stringErrorHandling = &quot;ERROR: problem reading session settings&quot;&amp;#10;    errorState = True&amp;#10;    &amp;#10;arrhythmic = False&amp;#10;if session_settings['rhythm_group'] in 'A' and ses_int == 1:&amp;#10;    arrhythmic = True&amp;#10;    stim_type = 'A'&amp;#10;elif session_settings['rhythm_group'] in 'A' and ses_int == 2:&amp;#10;    arrhythmic = False&amp;#10;    stim_type = 'R'&amp;#10;elif session_settings['rhythm_group'] in 'B' and ses_int == 1:&amp;#10;    arrhythmic = False&amp;#10;    stim_type = 'R'&amp;#10;elif session_settings['rhythm_group'] in 'B' and ses_int == 2:&amp;#10;    arrhythmic = True&amp;#10;    stim_type = 'A'&amp;#10;else:&amp;#10;    stringErrorHandling = &quot;ERROR: rhythm_group must be either A or B&quot;&amp;#10;    errorState = True&amp;#10;" valType="extendedCode"/>
        <Param name="Begin JS Experiment" updates="constant" val="/* Syntax Error: Fix Python code */" valType="extendedCode"/>
        <Param name="Begin JS Routine" updates="constant" val="if (errorState) {&amp;#10;} else {&amp;#10;    continueRoutine = false;&amp;#10;}&amp;#10;" valType="extendedCode"/>
        <Param name="Begin Routine" updates="constant" val="if errorState:&amp;#10;    pass&amp;#10;else:&amp;#10;    continueRoutine = False" valType="extendedCode"/>
        <Param name="Code Type" updates="None" val="Auto-&gt;JS" valType="str"/>
        <Param name="Each Frame" updates="constant" val="" valType="extendedCode"/>
        <Param name="Each JS Frame" updates="constant" val="" valType="extendedCode"/>
        <Param name="End Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="End JS Experiment" updates="constant" val="" valType="extendedCode"/>
        <Param name="End JS Routine" updates="constant" val="if (errorState) {&amp;#10;    console.log(stringErrorHandling);&amp;#10;    sys.exit(1);&amp;#10;}&amp;#10;" valType="extendedCode"/>
        <Param name="End Routine" updates="constant" val="if errorState:&amp;#10;    print(stringErrorHandling)&amp;#10;    sys.exit(1)" valType="extendedCode"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="name" updates="None" val="codeErrorHandling" valType="code"/>
      </CodeComponent>
      <TextComponent name="textErrorHandling">
        <Param name="color" updates="constant" val="crimson" valType="color"/>
        <Param name="colorSpace" updates="constant" val="rgb" valType="str"/>
        <Param name="contrast" updates="constant" val="1" valType="num"/>
        <Param name="disabled" updates="None" val="False" valType="bool"/>
        <Param name="durationEstim" updates="None" val="" valType="num"/>
        <Param name="flip" updates="constant" val="None" valType="str"/>
        <Param name="font" updates="constant" val="Open Sans" valType="str"/>
        <Param name="languageStyle" updates="None" val="LTR" valType="str"/>
        <Param name="letterHeight" updates="constant" val="0.1" valType="num"/>
        <Param name="name" updates="None" val="textErrorHandling" valType="code"/>
        <Param name="opacity" updates="constant" val="" valType="num"/>
        <Param name="ori" updates="constant" val="0" valType="num"/>
        <Param name="pos" updates="constant" val="(0, 0)" valType="list"/>
        <Param name="saveStartStop" updates="None" val="True" valType="bool"/>
        <Param name="startEstim" updates="None" val="" valType="num"/>
        <Param name="startType" updates="None" val="time (s)" valType="str"/>
        <Param name="startVal" updates="None" val="0.0" valType="num"/>
        <Param name="stopType" updates="None" val="duration (s)" valType="str"/>
        <Param name="stopVal" updates="constant" val="10.0" valType="num"/>
        <Param name="syncScreenRefresh" updates="None" val="True" valType="bool"/>
        <Param name="text" updates="constant" val="$stringErrorHandling" valType="str"/>
        <Param name="units" updates="None" val="from exp settings" valType="str"/>
        <Param name="wrapWidth" updates="constant" val="" valType="num"/>
      </TextComponent>
    </Routine>
  </Routines>
  <Flow>
    <Routine name="error_handling"/>
    <Routine name="start"/>
    <LoopInitiator loopType="TrialHandler" name="trialsTestPulse">
      <Param name="Selected rows" updates="None" val="" valType="str"/>
      <Param name="conditions" updates="None" val="None" valType="str"/>
      <Param name="conditionsFile" updates="None" val="" valType="file"/>
      <Param name="endPoints" updates="None" val="[0, 1]" valType="num"/>
      <Param name="isTrials" updates="None" val="True" valType="bool"/>
      <Param name="loopType" updates="None" val="random" valType="str"/>
      <Param name="nReps" updates="None" val="doTestPulse" valType="num"/>
      <Param name="name" updates="None" val="trialsTestPulse" valType="code"/>
      <Param name="random seed" updates="None" val="" valType="code"/>
    </LoopInitiator>
    <Routine name="test_pulse"/>
    <LoopTerminator name="trialsTestPulse"/>
    <LoopInitiator loopType="TrialHandler" name="trialsOneMinReady">
      <Param name="Selected rows" updates="None" val="" valType="str"/>
      <Param name="conditions" updates="None" val="None" valType="str"/>
      <Param name="conditionsFile" updates="None" val="" valType="file"/>
      <Param name="endPoints" updates="None" val="[0, 1]" valType="num"/>
      <Param name="isTrials" updates="None" val="True" valType="bool"/>
      <Param name="loopType" updates="None" val="random" valType="str"/>
      <Param name="nReps" updates="None" val="doOneMinRunReady" valType="num"/>
      <Param name="name" updates="None" val="trialsOneMinReady" valType="code"/>
      <Param name="random seed" updates="None" val="" valType="code"/>
    </LoopInitiator>
    <Routine name="one_min_ready"/>
    <LoopTerminator name="trialsOneMinReady"/>
    <LoopInitiator loopType="TrialHandler" name="trialsOneMin">
      <Param name="Selected rows" updates="None" val="" valType="str"/>
      <Param name="conditions" updates="None" val="None" valType="str"/>
      <Param name="conditionsFile" updates="None" val="$one_min_condition_file" valType="file"/>
      <Param name="endPoints" updates="None" val="[0, 1]" valType="num"/>
      <Param name="isTrials" updates="None" val="True" valType="bool"/>
      <Param name="loopType" updates="None" val="sequential" valType="str"/>
      <Param name="nReps" updates="None" val="doOneMinRuns" valType="num"/>
      <Param name="name" updates="None" val="trialsOneMin" valType="code"/>
      <Param name="random seed" updates="None" val="" valType="code"/>
    </LoopInitiator>
    <Routine name="one_min_run"/>
    <LoopTerminator name="trialsOneMin"/>
    <LoopInitiator loopType="TrialHandler" name="trialsFirstFiveMin">
      <Param name="Selected rows" updates="None" val="" valType="str"/>
      <Param name="conditions" updates="None" val="[OrderedDict([('stimOn', 0)])]" valType="str"/>
      <Param name="conditionsFile" updates="None" val="first_five_min_condition.csv" valType="file"/>
      <Param name="endPoints" updates="None" val="[0, 1]" valType="num"/>
      <Param name="isTrials" updates="None" val="True" valType="bool"/>
      <Param name="loopType" updates="None" val="random" valType="str"/>
      <Param name="nReps" updates="None" val="doFirstFiveMinRun" valType="num"/>
      <Param name="name" updates="None" val="trialsFirstFiveMin" valType="code"/>
      <Param name="random seed" updates="None" val="" valType="code"/>
    </LoopInitiator>
    <Routine name="five_min_run"/>
    <LoopTerminator name="trialsFirstFiveMin"/>
    <LoopInitiator loopType="TrialHandler" name="trialsFiveMinOnOff">
      <Param name="Selected rows" updates="None" val="" valType="str"/>
      <Param name="conditions" updates="None" val="[OrderedDict([('stimOn', 1)]), OrderedDict([('stimOn', 0)]), OrderedDict([('stimOn', 1)]), OrderedDict([('stimOn', 0)])]" valType="str"/>
      <Param name="conditionsFile" updates="None" val="five_min_conditions.csv" valType="file"/>
      <Param name="endPoints" updates="None" val="[0, 1]" valType="num"/>
      <Param name="isTrials" updates="None" val="True" valType="bool"/>
      <Param name="loopType" updates="None" val="sequential" valType="str"/>
      <Param name="nReps" updates="None" val="doOnOffFiveMinRuns" valType="num"/>
      <Param name="name" updates="None" val="trialsFiveMinOnOff" valType="code"/>
      <Param name="random seed" updates="None" val="" valType="code"/>
    </LoopInitiator>
    <Routine name="five_min_run"/>
    <LoopTerminator name="trialsFiveMinOnOff"/>
    <LoopInitiator loopType="TrialHandler" name="trialsExit">
      <Param name="Selected rows" updates="None" val="" valType="str"/>
      <Param name="conditions" updates="None" val="None" valType="str"/>
      <Param name="conditionsFile" updates="None" val="" valType="file"/>
      <Param name="endPoints" updates="None" val="[0, 1]" valType="num"/>
      <Param name="isTrials" updates="None" val="True" valType="bool"/>
      <Param name="loopType" updates="None" val="random" valType="str"/>
      <Param name="nReps" updates="None" val="doExit" valType="num"/>
      <Param name="name" updates="None" val="trialsExit" valType="code"/>
      <Param name="random seed" updates="None" val="" valType="code"/>
    </LoopInitiator>
    <Routine name="exit"/>
    <LoopTerminator name="trialsExit"/>
  </Flow>
</PsychoPy2experiment>
